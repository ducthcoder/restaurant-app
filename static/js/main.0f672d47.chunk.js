(this["webpackJsonprestaurant-app"]=this["webpackJsonprestaurant-app"]||[]).push([[0],{100:function(e,t,r){},101:function(e,t,r){},127:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(13),a=r.n(o),c=(r(100),r.p,r(101),r(192)),i=r(46),s=r(190),l=r(8),u=r(11),d=r(15),j=function(e){var t=Object(n.useState)(e),r=Object(d.a)(t,2),o=r[0],a=r[1],c=Object(n.useState)({}),i=Object(d.a)(c,2),s=i[0],j=i[1];return{values:o,setValues:a,errors:s,setErrors:j,handleInputChange:function(e){var t=e.target,r=t.name,n=t.value;a(Object(u.a)(Object(u.a)({},o),{},Object(l.a)({},r,n)))},resetFormControls:function(){a(e),j({})}}},b=r(170),O=r(173),h=r(128),f=r(175),m=r(176),p=r(177),x=r(129),g=r(178),v=r(179),I=r(56),y=r.n(I),C=function(e){return Math.round(100*(e+Number.EPSILON))/100},N=r(3),T=Object(b.a)((function(e){return{paperRoot:{margin:"15px 0px","&:hover":{cursor:"pointer"},"&:hover $deleteButton":{display:"block"}},buttonGroup:{backgroundColor:"#e3e3e3",borderRadius:8,"& .MuiButtonBase-root":{border:"none",minWidth:"25px",padding:"1px"},"& button:nth-child(2)":{fontSize:"1.2rem",color:"#000"}},deleteButton:{display:"none","& .MuiButtonBase-root":{color:"#e81719"}},totalPerItem:{fontWeight:"bolder",fontSize:"1.2em",margin:"0px 10px"}}})),k=function(e){var t=e.values,r=e.setValues,n=T(),o=t.orderDetails,a=function(e,n){var o=Object(u.a)({},t),a=o.orderDetails[e];a.quantityItem+n>0&&(a.quantityItem+=n,r(Object(u.a)({},o)))};return Object(N.jsx)(O.a,{children:0==o.length?Object(N.jsx)(h.a,{children:Object(N.jsx)(f.a,{primary:"Please select food items",primaryTypographyProps:{style:{textAlign:"center",fontStyle:"italic"}}})}):o.map((function(e,o){return Object(N.jsx)(m.a,{className:n.paperRoot,children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(f.a,{primary:e.foodItemName,primaryTypographyProps:{component:"h1",style:{fontWeight:"500",fontSize:"1.2rem"}},secondary:Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(p.a,{size:"small",className:n.buttonGroup,children:[Object(N.jsx)(x.a,{onClick:function(e){return a(o,-1)},children:"-"}),Object(N.jsx)(x.a,{disabled:!0,children:e.quantityItem}),Object(N.jsx)(x.a,{onClick:function(e){return a(o,1)},children:"+"})]}),Object(N.jsx)("span",{className:n.totalPerItem,children:C(e.foodItemPrice*e.quantityItem)+" VND"})]}),secondaryTypographyProps:{component:"div"}}),Object(N.jsx)(g.a,{className:n.deleteButton,children:Object(N.jsx)(v.a,{onClick:function(n){return function(e,n){var o=Object(u.a)({},t);o.orderDetails=o.orderDetails.filter((function(t,r){return r!=e})),0!=n&&(o.deletedOrderItemIds+=n+","),r(Object(u.a)({},o))}(o,e.orderDetailId)},disableRipple:!0,children:Object(N.jsx)(y.a,{})})})]})},o)}))})},M=r(2),P=["children"],S=Object(b.a)((function(e){return{root:{"& .MuiFormControl-root":{width:"90%",margin:e.spacing(1)}}}}));function B(e){var t=S(),r=e.children,n=Object(M.a)(e,P);return Object(N.jsx)("form",Object(u.a)(Object(u.a)({className:t.root,noValidate:!0,autoComplete:"off"},n),{},{children:r}))}var D=["children","color","variant","onClick","className"],F=Object(b.a)((function(e){return{root:{margin:e.spacing(1),"& .MuiButton-label":{textTransform:"none"}}}})),V=function(e){var t=e.children,r=e.color,n=e.variant,o=e.onClick,a=e.className,c=Object(M.a)(e,D),i=F();return Object(N.jsx)(x.a,Object(u.a)(Object(u.a)({className:i.root+" "+(a||""),variant:n||"contained",color:r||"default",onClick:o},c),{},{children:t}))},E=r(180),w=["name","label","value","variant","onChange","error"],A=function(e){var t=e.name,r=e.label,n=e.value,o=e.variant,a=e.onChange,c=e.error,i=void 0===c?null:c,s=Object(M.a)(e,w);return Object(N.jsx)(E.a,Object(u.a)(Object(u.a)({variant:o||"outlined",label:r,name:t,value:n,onChange:a},s),i&&{error:!0,helperText:i}))},L=r(132),q=r(137),z=r(135),W=r(182),R=r(133),G=function(e){var t=e.name,r=e.label,n=e.value,o=e.variant,a=e.onChange,c=e.options,i=e.error,s=void 0===i?null:i;return Object(N.jsxs)(L.a,Object(u.a)(Object(u.a)({variant:o||"outlined"},s&&{error:!0}),{},{children:[Object(N.jsx)(q.a,{children:r}),Object(N.jsx)(z.a,{label:r,name:t,value:n,onChange:a,children:c.map((function(e){return Object(N.jsx)(W.a,{value:e.id,children:e.title},e.id)}))}),s&&Object(N.jsx)(R.a,{children:s})]}))},J=r(191),H=r(83),$=r.n(H),K=r(82),Q=r.n(K),U=r(84),X=r.n(U),Y=r(45),Z=r.n(Y),_="Customer",ee="FoodItem",te="Order",re=function(e){var t="http://restaurantapi.somee.com/api/"+e+"/";return{fetchAll:function(){return Z.a.get(t)},fetchById:function(e){return Z.a.get(t+e)},create:function(e){return Z.a.post(t,e)},update:function(e,r){return Z.a.put(t+e,r)},delete:function(e){return Z.a.delete(t+e)}}},ne=r(195),oe=r(183),ae=r(184),ce=r(80),ie=r.n(ce),se=Object(b.a)((function(e){return{dialogWrapper:{padding:e.spacing(2),position:"absolute",top:e.spacing(5)},dialogTitle:{paddingRight:"0px"}}})),le=function(e){var t=e.title,r=e.children,n=e.openPopup,o=e.setOpenPopup,a=se();return Object(N.jsxs)(ne.a,{open:n,maxWidth:"md",classes:{paper:a.dialogWrapper},children:[Object(N.jsx)(oe.a,{className:a.dialogTitle,children:Object(N.jsxs)("div",{style:{display:"flex"},children:[Object(N.jsx)(i.a,{variant:"h6",component:"div",style:{flexGrow:1},children:t}),Object(N.jsx)(v.a,{onClick:function(){o(!1)},children:Object(N.jsx)(ie.a,{})})]})}),Object(N.jsx)(ae.a,{dividers:!0,children:r})]})},ue=r(186),de=r(187),je=r(188),be=r(189),Oe=r(185),he=Object(b.a)((function(e){return{table:{"& tbody td":{fontWeight:"300"},"& tbody tr:hover":{backgroundColor:"#fffbf2",cursor:"pointer"},"& .MuiTableCell-root":{border:"none"}}}})),fe=function(e){var t=he();return Object(N.jsx)(Oe.a,{className:t.table,children:e.children})},me=r(81),pe=r.n(me),xe=function(e){var t=e.setOrderId,r=e.setOrderListVisibility,o=e.resetFormControls,a=e.setNotify,c=Object(n.useState)([]),i=Object(d.a)(c,2),s=i[0],l=i[1];Object(n.useEffect)((function(){re(te).fetchAll().then((function(e){l(e.data)})).catch((function(e){return console.log(e)}))}),[]);return Object(N.jsxs)(fe,{children:[Object(N.jsx)(ue.a,{children:Object(N.jsxs)(de.a,{children:[Object(N.jsx)(je.a,{children:"Order Number"}),Object(N.jsx)(je.a,{children:"Customer"}),Object(N.jsx)(je.a,{children:"Pay Method"}),Object(N.jsx)(je.a,{children:"Grand Total"}),Object(N.jsx)(je.a,{})]})}),Object(N.jsx)(be.a,{children:s.map((function(e){return Object(N.jsxs)(de.a,{children:[Object(N.jsx)(je.a,{children:e.orderNumber}),Object(N.jsx)(je.a,{children:e.customer.customerName}),Object(N.jsx)(je.a,{children:e.pMethod}),Object(N.jsx)(je.a,{children:e.gTotal}),Object(N.jsxs)(je.a,{children:[Object(N.jsx)(x.a,{onClick:function(n){return o=e.orderId,t(o),void r(!1);var o},children:Object(N.jsx)(pe.a,{color:"primary"})}),Object(N.jsx)(x.a,{onClick:function(n){return c=e.orderId,void(window.confirm("Are you sure to delete this record ?")&&re(te).delete(c).then((function(e){r(!1),t(0),o(),a({isOpen:!0,message:"Delete order successfully."})})).catch((function(e){return console.log(e)})));var c},children:Object(N.jsx)(y.a,{color:"secondary"})})]})]},e.orderId)}))})]})},ge=r(196),ve=r(194),Ie=Object(b.a)((function(e){return{root:{top:e.spacing(9),"& .MuiAlert-root":{backgroundColor:"#f3b33d",color:"#000"},"& .MuiAlert-icon":{color:"#000"}}}})),ye=function(e){var t=e.notify,r=e.setNotify,n=Ie(),o=function(e,n){"clickaway"!==n&&r(Object(u.a)(Object(u.a)({},t),{},{isOpen:!1}))};return Object(N.jsx)(ge.a,{autoHideDuration:3e3,className:n.root,open:t.isOpen,anchorOrigin:{vertical:"top",horizontal:"right"},onClose:o,children:Object(N.jsx)(ve.a,{onClose:o,children:t.message})})},Ce=Object(b.a)((function(e){return{adornmentText:{"& .MuiTypography-root":{color:"#f3b33d",fontWeight:"bolder",fontSize:"1.5rem"}},submitButtonGroup:{backgroundColor:"#f3b33d",color:"#000",margin:e.spacing(1),"& .MuiButton-label":{textTransform:"none"},"&:hover":{backgroundColor:"#f3b33d"}}}})),Ne=function(e){var t=e.values,r=e.setValues,o=e.errors,a=e.setErrors,c=e.handleInputChange,i=e.resetFormControls,l=Ce(),j=Object(n.useState)(!1),b=Object(d.a)(j,2),O=b[0],h=b[1],f=Object(n.useState)(0),m=Object(d.a)(f,2),g=m[0],v=m[1],I=Object(n.useState)({isOpen:!1}),y=Object(d.a)(I,2),T=y[0],k=y[1],M=Object(n.useState)([]),P=Object(d.a)(M,2),S=P[0],D=P[1];Object(n.useEffect)((function(){re(_).fetchAll().then((function(e){var t=e.data.map((function(e){return{id:e.customerId,title:e.customerName}}));t=[{id:0,title:"Select"}].concat(t),D(t)})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){var e=t.orderDetails.reduce((function(e,t){return e+t.quantityItem*t.foodItemPrice}),0);r(Object(u.a)(Object(u.a)({},t),{},{gTotal:C(e)}))}),[JSON.stringify(t.orderDetails)]),Object(n.useEffect)((function(){0==g?i():re(te).fetchById(g).then((function(e){r(e.data),a({})})).catch((function(e){return console.log(e)}))}),[g]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(B,{onSubmit:function(e){e.preventDefault(),function(){var e={};return e.customerId=0!=t.customerId?"":"This field is required.",e.pMethod="none"!=t.pMethod?"":"This field is required.",e.orderDetails=0!=t.orderDetails.length?"":"This field is required.",a(Object(u.a)({},e)),Object.values(e).every((function(e){return""===e}))}()&&(0==t.orderId?re(te).create(t).then((function(e){i(),k({isOpen:!0,message:"New order is created."})})).catch((function(e){return console.log(e)})):re(te).update(t.orderId,t).then((function(e){v(0),k({isOpen:!0,message:"The order is updated."})})).catch((function(e){return console.log(e)})))},children:Object(N.jsxs)(s.a,{container:!0,children:[Object(N.jsxs)(s.a,{item:!0,xs:6,children:[Object(N.jsx)(A,{disabled:!0,label:"Order Number",name:"orderNumber",value:t.orderNumber,InputProps:{startAdornment:Object(N.jsx)(J.a,{className:l.adornmentText,position:"start",children:"#"})}}),Object(N.jsx)(G,{label:"Customer",name:"customerId",value:t.customerId,onChange:c,options:S,error:o.customerId})]}),Object(N.jsxs)(s.a,{item:!0,xs:6,children:[Object(N.jsx)(G,{label:"Payment Method",name:"pMethod",value:t.pMethod,onChange:c,options:[{id:"none",title:"Select"},{id:"Cash",title:"Cash"},{id:"Card",title:"Card"}],error:o.pMethod}),Object(N.jsx)(A,{disabled:!0,label:"Grand Total",name:"gTotal",value:t.gTotal,InputProps:{startAdornment:Object(N.jsx)(J.a,{className:l.adornmentText,position:"start",children:"VND"})}}),Object(N.jsxs)(p.a,{className:l.submitButtonGroup,children:[Object(N.jsx)(x.a,{size:"large",endIcon:Object(N.jsx)(Q.a,{}),type:"submit",children:"Submit"}),Object(N.jsx)(x.a,{size:"small",onClick:function(){i(),v(0)},startIcon:Object(N.jsx)($.a,{})})]}),Object(N.jsx)(V,{size:"large",onClick:function(){h(!0)},startIcon:Object(N.jsx)(X.a,{}),children:"Orders"})]})]})}),Object(N.jsx)(le,{title:"List of Orders",openPopup:O,setOpenPopup:h,children:Object(N.jsx)(xe,{setOrderId:v,setOrderListVisibility:h,resetFormControls:i,setNotify:k})}),Object(N.jsx)(ye,{notify:T,setNotify:k})]})},Te=r(21),ke=r(89),Me=r(85),Pe=r.n(Me),Se=r(86),Be=r.n(Se),De=r(87),Fe=r.n(De),Ve=Object(b.a)((function(e){return{searchPaper:{padding:"2px 4px",display:"flex",alignItems:"center"},searchInput:{marginLeft:e.spacing(1.5),flex:1},listRoot:{marginTop:e.spacing(1),maxHeight:450,overflow:"auto","& li:hover":{cursor:"pointer",backgroundColor:"#e3e3e3"},"& li:hover .MuiButtonBase-root":{display:"block",color:"#000"},"& .MuiButtonBase-root":{display:"none"},"& .MuiButtonBase-root:hover":{backgroundColor:"transparent"}}}})),Ee=function(e){var t=e.values,r=e.setValues,o=t.orderDetails,a=Ve(),c=Object(n.useState)([]),i=Object(d.a)(c,2),s=i[0],l=i[1],j=Object(n.useState)(""),b=Object(d.a)(j,2),p=b[0],x=b[1],I=Object(n.useState)([]),y=Object(d.a)(I,2),C=y[0],T=y[1];Object(n.useEffect)((function(){re(ee).fetchAll().then((function(e){T(e.data),l(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){var e=Object(Te.a)(C);e=e.filter((function(e){return e.foodItemName.toLowerCase().includes(p.toLocaleLowerCase())&&o.every((function(t){return t.foodItemId!=e.foodItemId}))})),l(e)}),[p,o]);var k=function(e){var n={orderId:t.orderId,orderDetailId:0,foodItemId:e.foodItemId,quantityItem:1,foodItemPrice:e.foodItemPrice,foodItemName:e.foodItemName};r(Object(u.a)(Object(u.a)({},t),{},{orderDetails:[].concat(Object(Te.a)(t.orderDetails),[n])}))};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(m.a,{className:a.searchPaper,children:[Object(N.jsx)(ke.a,{className:a.searchInput,value:p,onChange:function(e){return x(e.target.value)},placeholder:"Search food items"}),Object(N.jsx)(v.a,{children:Object(N.jsx)(Pe.a,{})})]}),Object(N.jsx)(O.a,{className:a.listRoot,children:s.map((function(e,t){return Object(N.jsxs)(h.a,{onClick:function(t){return k(e)},children:[Object(N.jsx)(f.a,{primary:e.foodItemName,secondary:e.foodItemPrice+" VND"}),Object(N.jsx)(g.a,{children:Object(N.jsxs)(v.a,{onClick:function(t){return k(e)},children:[Object(N.jsx)(Be.a,{}),Object(N.jsx)(Fe.a,{})]})})]},t)}))})]})},we=function(){var e=j({orderId:0,orderNumber:Math.floor(1e5+9e5*Math.random()).toString(),customerId:0,pMethod:"none",gTotal:0,deletedOrderItemIds:"",orderDetails:[]}),t=e.values,r=e.setValues,n=e.errors,o=e.setErrors,a=e.handleInputChange,c=e.resetFormControls;return Object(N.jsxs)(s.a,{container:!0,spacing:2,children:[Object(N.jsx)(s.a,{item:!0,xs:12,children:Object(N.jsx)(Ne,{values:t,setValues:r,errors:n,setErrors:o,handleInputChange:a,resetFormControls:c})}),Object(N.jsx)(s.a,{item:!0,xs:6,children:Object(N.jsx)(Ee,{values:t,setValues:r})}),Object(N.jsx)(s.a,{item:!0,xs:6,children:Object(N.jsx)(k,{values:t,setValues:r})})]})};var Ae=function(){return Object(N.jsxs)(c.a,{maxWidth:"md",children:[Object(N.jsx)(i.a,{gutterBottom:!0,variant:"h2",align:"center",children:"Restaurant App"}),Object(N.jsx)(we,{})]})},Le=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,197)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;r(e),n(e),o(e),a(e),c(e)}))};a.a.render(Object(N.jsx)(Ae,{}),document.getElementById("root")),Le()}},[[127,1,2]]]);
//# sourceMappingURL=main.0f672d47.chunk.js.map